"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8618],{8618:(I,u,n)=>{n.r(u),n.d(u,{RegisterPageModule:()=>y});var m=n(177),d=n(4341),R=n(4856),a=n(4742),h=n(8986),c=n(467),e=n(3953),p=n(9644),M=n(4796),f=n(369),C=n(3656),F=n(4621),P=n(9649);function _(s,l){if(1&s&&(e.j41(0,"ion-select-option",12),e.EFF(1),e.k0s()),2&s){const g=l.$implicit;e.Y8G("value",g.monitoreo_id),e.R7$(),e.SpI(" ",g.monitoreo_nombre," ")}}const j=[{path:"",component:(()=>{var s;class l{constructor(i,o,r,t,E,v){this.rioService=i,this.authS=o,this.storage=r,this.navCtrl=t,this.menuS=E,this.geolocation=v,this.selectedRio="",this.rios=[],this.name="",this.apellido="",this.username="",this.email="",this.celular="",this.password="",this.repassword="",this.userid="",this.storage.create()}ngOnInit(){this.menuS.habilitarMenu(!1),this.loadRios()}getPos(){var i=this;return(0,c.A)(function*(){try{const o=yield i.geolocation.getCurrentPosition();i.storage.set("userLat",o.coords.latitude),i.storage.set("userLng",o.coords.longitude),i.guardarPos(o.coords.latitude,o.coords.longitude)}catch(o){console.error("Error obteniendo la ubicaci\xf3n:",o)}})()}guardarPos(i,o){var r=this;return(0,c.A)(function*(){r.userid=yield r.storage.get("user_id"),r.authS.savePos(r.userid,i,o).subscribe(t=>{"error"==t.status&&console.log("Erro",t.message)})})()}loadRios(){this.rioService.getListaRios().subscribe(i=>{"success"===i.status&&(this.rios=i.data)},i=>{console.error("Error al cargar la lista de r\xedos",i)})}register(){this.selectedRioInfo=this.rios.find(i=>i.monitoreo_id===this.selectedRio),this.authS.registrar(this.name,this.apellido,this.username,this.email,this.celular,this.password,this.selectedRio,this.selectedRioInfo.est_id,"2",this.repassword).subscribe(i=>{"success"===i.status?(this.storage.set("username",i.data.username),this.storage.set("cuenta_id",i.data.cuenta_id),this.storage.set("user_rioid",i.data.user_rioid),this.storage.set("user_nombre",i.data.user_nombre),this.storage.set("user_email",i.data.user_email),this.storage.set("est_id",i.data.est_id),this.storage.set("user_apellido",i.data.user_apellido),this.storage.set("token",i.data.token),this.menuS.habilitarMenu(!0),this.getPos(),this.navCtrl.navigateForward("/home")):console.log("registro fallido:",i.message)},i=>{console.error("Error en la petici\xf3n:",i)})}}return(s=l).\u0275fac=function(i){return new(i||s)(e.rXU(p.G),e.rXU(M.u),e.rXU(f.w),e.rXU(C.q9),e.rXU(F.$),e.rXU(P.L))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-register"]],decls:41,vars:9,consts:[[3,"ngSubmit"],["position","floating"],["type","text","name","name","required","",3,"ngModelChange","ngModel"],["type","text","name","apellido","required","",3,"ngModelChange","ngModel"],["type","text","name","username","required","",3,"ngModelChange","ngModel"],["type","email","name","email","required","",3,"ngModelChange","ngModel"],["type","tel","name","celular","required","",3,"ngModelChange","ngModel"],["name","selectedRio","required","",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","password","name","password","required","",3,"ngModelChange","ngModel"],["type","password","name","repassword","required","",3,"ngModelChange","ngModel"],["expand","full","type","submit"],[3,"value"]],template:function(i,o){1&i&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Registro"),e.k0s()()(),e.j41(4,"ion-content")(5,"form",0),e.bIt("ngSubmit",function(){return o.register()}),e.j41(6,"ion-item")(7,"ion-label",1),e.EFF(8,"Nombre"),e.k0s(),e.j41(9,"ion-input",2),e.mxI("ngModelChange",function(t){return e.DH7(o.name,t)||(o.name=t),t}),e.k0s()(),e.j41(10,"ion-item")(11,"ion-label",1),e.EFF(12,"Apellidos"),e.k0s(),e.j41(13,"ion-input",3),e.mxI("ngModelChange",function(t){return e.DH7(o.apellido,t)||(o.apellido=t),t}),e.k0s()(),e.j41(14,"ion-item")(15,"ion-label",1),e.EFF(16,"Nombre de Usuario"),e.k0s(),e.j41(17,"ion-input",4),e.mxI("ngModelChange",function(t){return e.DH7(o.username,t)||(o.username=t),t}),e.k0s()(),e.j41(18,"ion-item")(19,"ion-label",1),e.EFF(20,"Correo Electr\xf3nico"),e.k0s(),e.j41(21,"ion-input",5),e.mxI("ngModelChange",function(t){return e.DH7(o.email,t)||(o.email=t),t}),e.k0s()(),e.j41(22,"ion-item")(23,"ion-label",1),e.EFF(24,"Numero de Celular"),e.k0s(),e.j41(25,"ion-input",6),e.mxI("ngModelChange",function(t){return e.DH7(o.celular,t)||(o.celular=t),t}),e.k0s()(),e.j41(26,"ion-item")(27,"ion-label"),e.EFF(28,"Selecciona un R\xedo"),e.k0s(),e.j41(29,"ion-select",7),e.mxI("ngModelChange",function(t){return e.DH7(o.selectedRio,t)||(o.selectedRio=t),t}),e.DNE(30,_,2,2,"ion-select-option",8),e.k0s()(),e.j41(31,"ion-item")(32,"ion-label",1),e.EFF(33,"Contrase\xf1a"),e.k0s(),e.j41(34,"ion-input",9),e.mxI("ngModelChange",function(t){return e.DH7(o.password,t)||(o.password=t),t}),e.k0s()(),e.j41(35,"ion-item")(36,"ion-label",1),e.EFF(37,"Confirmar Contrase\xf1a"),e.k0s(),e.j41(38,"ion-input",10),e.mxI("ngModelChange",function(t){return e.DH7(o.repassword,t)||(o.repassword=t),t}),e.k0s()(),e.j41(39,"ion-button",11),e.EFF(40,"Registrarse"),e.k0s()()()),2&i&&(e.R7$(9),e.R50("ngModel",o.name),e.R7$(4),e.R50("ngModel",o.apellido),e.R7$(4),e.R50("ngModel",o.username),e.R7$(4),e.R50("ngModel",o.email),e.R7$(4),e.R50("ngModel",o.celular),e.R7$(4),e.R50("ngModel",o.selectedRio),e.R7$(),e.Y8G("ngForOf",o.rios),e.R7$(4),e.R50("ngModel",o.password),e.R7$(4),e.R50("ngModel",o.repassword))},dependencies:[m.Sq,d.qT,d.BC,d.cb,d.YS,d.vS,d.cV,a.Jm,a.W9,a.eU,a.$w,a.uz,a.he,a.Nm,a.Ip,a.BC,a.ai,a.Je,a.Gw]}),l})()}];let b=(()=>{var s;class l{}return(s=l).\u0275fac=function(i){return new(i||s)},s.\u0275mod=e.$C({type:s}),s.\u0275inj=e.G2t({imports:[h.iI.forChild(j),h.iI]}),l})(),y=(()=>{var s;class l{}return(s=l).\u0275fac=function(i){return new(i||s)},s.\u0275mod=e.$C({type:s}),s.\u0275inj=e.G2t({imports:[m.MD,d.YN,a.bv,b,R.eN]}),l})()}}]);